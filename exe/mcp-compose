#!/usr/bin/env ruby
# frozen_string_literal: true

require "mcp_compose"

build_server = ->(config) do
  MCPCompose::Server.new(config: config)
end

config_parser = MCPCompose::ConfigParser.new(cwd: Dir.pwd)
cli = MCPCompose::CLI.new(build_server_function: build_server, config_parser: config_parser)

begin
  cli.run
rescue MCPCompose::CLI::Error => e
  warn e.message
  exit 1
end
